---
alwaysApply: true
---

# assembl3D - File Structure & Organization

## ğŸ“ Complete Directory Structure

```
assembl3D/
â”‚
â”œâ”€â”€ .cursor/
â”‚   â””â”€â”€ rules/                          # Cursor AI rules
â”‚
â”œâ”€â”€ backend/                            # Node.js/Express backend
â”‚   â”œâ”€â”€ brightdata/                     # ğŸ”µ Person 1: Bright Data scraping
â”‚   â”‚   â”œâ”€â”€ scraper.ts                 # Main scraping orchestrator
â”‚   â”‚   â”œâ”€â”€ serp-search.ts             # SERP API integration
â”‚   â”‚   â”œâ”€â”€ web-scraper.ts             # Product page scraper
â”‚   â”‚   â”œâ”€â”€ pdf-downloader.ts          # PDF download with Web Unlocker
â”‚   â”‚   â””â”€â”€ types.ts                   # Scraping interfaces
â”‚   â”‚
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ gemini/                     # ğŸŸ¢ Person 3: AI processing
â”‚   â”‚   â”‚   â”œâ”€â”€ processor.ts           # Main Gemini orchestrator
â”‚   â”‚   â”‚   â”œâ”€â”€ pdf-parser.ts          # PDF to image conversion
â”‚   â”‚   â”‚   â”œâ”€â”€ prompt-builder.ts      # Dynamic prompt generation
â”‚   â”‚   â”‚   â”œâ”€â”€ scene-generator.ts     # 3D scene JSON generation
â”‚   â”‚   â”‚   â””â”€â”€ types.ts               # AI extraction interfaces
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                        # API routes
â”‚   â”‚   â”‚   â”œâ”€â”€ routes.ts              # Main route definitions
â”‚   â”‚   â”‚   â”œâ”€â”€ scrape.route.ts        # POST /api/scrape-product
â”‚   â”‚   â”‚   â””â”€â”€ assembly.route.ts      # GET /api/assembly/:id
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â”œâ”€â”€ error-handler.ts       # Global error handling
â”‚   â”‚   â”‚   â””â”€â”€ cors.ts                # CORS configuration
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.ts              # Emoji-based logging
â”‚   â”‚   â”‚   â””â”€â”€ cache.ts               # Simple caching layer
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ index.ts                    # Server entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ pdfs/                       # Downloaded PDF files
â”‚   â”‚   â””â”€â”€ cache/                      # Cached extraction results
â”‚   â”‚
â”‚   â”œâ”€â”€ .env                            # Environment variables (DO NOT COMMIT)
â”‚   â”œâ”€â”€ .env.example                    # Example env file
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ frontend/                           # Next.js 15 frontend
â”‚   â”œâ”€â”€ app/                            # ğŸŸ¡ Person 2: Next.js app directory
â”‚   â”‚   â”œâ”€â”€ page.tsx                   # Home page (search interface)
â”‚   â”‚   â”œâ”€â”€ layout.tsx                 # Root layout
â”‚   â”‚   â”œâ”€â”€ globals.css                # Global styles
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ assembly/
â”‚   â”‚       â””â”€â”€ [id]/
â”‚   â”‚           â””â”€â”€ page.tsx           # Assembly viewer page
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ search/                     # ğŸŸ¡ Person 2: Search UI
â”‚   â”‚   â”‚   â”œâ”€â”€ SmartSearch.tsx        # Main search component
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchResults.tsx      # Results list
â”‚   â”‚   â”‚   â”œâ”€â”€ ProductCard.tsx        # Individual product card
â”‚   â”‚   â”‚   â””â”€â”€ SearchProgress.tsx     # Real-time progress indicator
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ assembly/                   # ğŸŸ¡ Person 2: Assembly UI
â”‚   â”‚   â”‚   â”œâ”€â”€ StepList.tsx           # Step-by-step sidebar
â”‚   â”‚   â”‚   â”œâ”€â”€ PartsList.tsx          # Parts needed for current step
â”‚   â”‚   â”‚   â”œâ”€â”€ ToolsList.tsx          # Tools required
â”‚   â”‚   â”‚   â””â”€â”€ StepNavigation.tsx     # Previous/Next buttons
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ viewer/                     # ğŸŸ£ Person 4: 3D viewer
â”‚   â”‚       â”œâ”€â”€ AssemblyViewer.tsx     # Main Three.js viewer component
â”‚   â”‚       â”œâ”€â”€ ViewerControls.tsx     # Camera controls UI
â”‚   â”‚       â”œâ”€â”€ PartHighlighter.tsx    # Part highlighting system
â”‚   â”‚       â””â”€â”€ SceneLoader.tsx        # Scene JSON loader
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ api-client.ts              # API wrapper for backend calls
â”‚   â”‚   â”œâ”€â”€ three-utils.ts             # ğŸŸ£ Person 4: Three.js utilities
â”‚   â”‚   â”œâ”€â”€ scene-renderer.ts          # ğŸŸ£ Person 4: Scene rendering
â”‚   â”‚   â””â”€â”€ utils.ts                   # General utilities
â”‚   â”‚
â”‚   â”œâ”€â”€ .env.local                      # Frontend environment variables (DO NOT COMMIT)
â”‚   â”œâ”€â”€ .env.example                    # Example env file
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ next.config.ts
â”‚   â”œâ”€â”€ tailwind.config.ts
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## ğŸ—‚ï¸ File Responsibilities by Person

### ğŸ”µ Person 1 (Bright Data Expert)
**Directory**: `backend/brightdata/`

**Create These Files**:
- `scraper.ts` - Main scraping orchestrator
- `serp-search.ts` - Search IKEA products via SERP API
- `web-scraper.ts` - Extract product data from IKEA pages
- `pdf-downloader.ts` - Download PDFs using Web Unlocker
- `types.ts` - Define `ScrapedProduct` interface

---

### ğŸŸ¡ Person 2 (Frontend Developer)
**Directory**: `frontend/app/`, `frontend/components/search/`, `frontend/components/assembly/`

**Create These Files**:
- `app/page.tsx` - Home page with search bar
- `components/search/SmartSearch.tsx` - Main search component
- `components/search/SearchProgress.tsx` - Real-time progress
- `components/assembly/StepList.tsx` - Step-by-step sidebar
- `components/assembly/PartsList.tsx` - Parts list UI
- `lib/api-client.ts` - Backend API wrapper

---

### ğŸŸ¢ Person 3 (AI Engineer)
**Directory**: `backend/src/gemini/`

**Create These Files**:
- `processor.ts` - Main Gemini orchestrator
- `pdf-parser.ts` - Convert PDF pages to images
- `prompt-builder.ts` - Generate context-aware prompts
- `scene-generator.ts` - Generate 3D scene JSON
- `types.ts` - Define `ExtractedStep` interface

---

### ğŸŸ£ Person 4 (3D Graphics Developer)
**Directory**: `frontend/components/viewer/`, `frontend/lib/three-utils.ts`

**Create These Files**:
- `components/viewer/AssemblyViewer.tsx` - Main Three.js component
- `components/viewer/PartHighlighter.tsx` - Part interaction
- `lib/three-utils.ts` - Three.js utility functions
- `lib/scene-renderer.ts` - Render scene from JSON

---

## ğŸ”„ Data Flow Through Files

```
1. User searches
   â†“
   frontend/components/search/SmartSearch.tsx
   â†“
   frontend/lib/api-client.ts
   â†“ POST /api/scrape-product
   backend/src/api/routes.ts
   â†“
2. Scrape IKEA
   â†“
   backend/brightdata/scraper.ts (Person 1)
   â†“
3. Process with AI
   â†“
   backend/src/gemini/processor.ts (Person 3)
   â†“
4. Return to frontend
   â†“
   frontend/app/assembly/[id]/page.tsx
   â†“
5. Render 3D
   â†“
   frontend/components/viewer/AssemblyViewer.tsx (Person 4)
```

---

## ğŸš¨ Important Files to Never Commit

Already in `.gitignore`:
```
.env
.env.local
backend/data/pdfs/*.pdf
node_modules/
backend/dist/
frontend/.next/
```

---

## ğŸ“¦ Where Each Person Installs Dependencies

### Person 1 (Backend - Bright Data)
```bash
cd backend
npm install axios  # HTTP requests to Bright Data APIs
```

### Person 2 (Frontend - UI)
Already installed with Next.js CLI!

### Person 3 (Backend - AI)
```bash
cd backend
npm install @google/generative-ai  # Gemini API
npm install pdf-lib pdfjs-dist     # PDF processing
npm install sharp                  # Image conversion
```

### Person 4 (Frontend - 3D)
```bash
cd frontend
npm install three          # Three.js
npm install @types/three   # TypeScript definitions
```

---

This structure keeps each person's work isolated while ensuring seamless integration!
